<html><head>
<meta http-equiv="content-type" content="text/html; charset=windows-1252">

<style>
#code
{
	position:absolute;
	display:block;
	width:48%;
	left:0px;
	border:1px solid black;
	padding:2px;
	margin:2px;
	top:50px;
	height:90%;
}

#rendu
{
	position:absolute;
	display:block;
	width:48%;
	right:0px;
	border:1px solid black;
	padding:2px;
	margin:2px;
	top:50px;
	height:90%;
	
}

#inputs
{
	text-align:center;
	background-color:lightgrey;
}

#load {
  max-height: 20px;
  display: none;
  position: absolute;
  right: 20px;
  top: 10px;
}
</style>

<script src="utils.js">
// définit html(),val(), show(), hide()
</script>

<script src="boucle.js">
// définit boucle()
</script>

<script type="text/javascript">
function maj() {
	// TODO : copie le code depuis le textarea "code" vers le div "rendu"
	html('rendu', val('code'));
}

function maj_auto() {
  var load_affiche = false;
  boucle({
    traitement: maj,
    continuer: function() { return val("cb"); }
  });
  boucle({
    periode: 0.5,
    traitement: function() { 
      if (!load_affiche) {
        show("load", "inline");
        load_affiche = true;
      } else {
        hide("load");
        load_affiche = false;
      }
    },
    continuer: function() {
      hide("load");
      return val("cb");
    }
  });
}

function init()
{
	console.log("Code a completer a l'aide de la librairie de fonctions 'boucle'");
}

</script>
</head>
<body onload="init();">

<div id="inputs">
	<input value="actualiser le rendu" type="button" onclick="maj();">
	<input id="cb" type="checkbox">
	<label for="cb" onclick="maj_auto();">automatiquement</label>
	<img id="load" src="loading-load.gif" />
</div>

<textarea id="code">&lt;h1&gt; Un paragraphe &lt;/h1&gt;
</textarea>

<div id="rendu">
</div>
</body></html>
